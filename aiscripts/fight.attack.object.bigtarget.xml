<?xml version='1.0' encoding='utf-8'?>
<diff>
  <replace sel="/aiscript/init/set_value[@name='$MaxGainDistance'][@exact='this.assignedcontrolled.maxcombatrange.all']/@exact">[this.assignedcontrolled.maxcombatrange.all, this.assignedcontrolled.maxradarrange * 0.9].min</replace>
  <replace sel="/aiscript/patch[@sinceversion='10']/set_value[@name='$MaxGainDistance'][@exact='this.ship.maxcombatrange.all']/@exact">[this.assignedcontrolled.maxcombatrange.all, this.assignedcontrolled.maxradarrange * 0.9].min</replace>
  <replace sel="/aiscript/attention[@min='visible']/actions/do_if[@value='$iscapship']/set_value[@name='$ToleranceWeapon1'][@exact='8.0deg']/@exact">4.0deg</replace>
  <replace sel="/aiscript/attention[@min='visible']/actions/do_if[@value='$iscapship']/set_value[@name='$ToleranceWeapon2'][@exact='4.0deg']/@exact">6.0deg</replace>
  <replace sel="/aiscript/attention[@min='visible']/actions/do_if[@value='$iscapship']/set_value[@name='$MinGainDistance'][@exact='this.ship.maxcombatrange.all * 0.75']/@exact">[this.assignedcontrolled.maxcombatrange.all * 0.75, this.assignedcontrolled.maxradarrange * 0.9].min</replace>
  <replace sel="/aiscript/attention[@min='visible']/actions/do_else/set_value[@name='$ToleranceWeapon1'][@exact='18.0deg']/@exact">4.0deg</replace>
  <replace sel="/aiscript/attention[@min='visible']/actions/do_else/set_value[@name='$ToleranceWeapon2'][@exact='8.0deg']/@exact">6.0deg</replace>
  <replace sel="/aiscript/attention[@min='visible']/actions/do_else/set_value[@name='$MinGainDistance'][@exact='this.ship.maxcombatrange.all']/@exact">[this.assignedcontrolled.maxcombatrange.all, this.assignedcontrolled.maxradarrange * 0.9].min</replace>
  <replace sel="/aiscript/attention[@min='visible']/actions/do_while[@value='$target.canbeattacked']/do_if[@value='$isinview']/@chance">100</replace>
  <replace sel="/aiscript/attention[@min='visible']/actions/do_while[@value='$target.canbeattacked']/move_to/@travel">($duration_movement gt 40s) and (((this.assignedcontrolled.bboxdistanceto.{$bigtarget} + this.assignedcontrolled.size) gt this.assignedcontrolled.maxcombatrange.all) or ((this.assignedcontrolled.bboxdistanceto.{$bigtarget} + this.assignedcontrolled.size) gt (this.assignedcontrolled.maxradarrange)))</replace>
  <replace sel="/aiscript/attention[@min='visible']/actions/do_while[@value='$target.canbeattacked']/do_while[@value='$target.canbeattacked and ($gaindistancetimeout gt player.age) and (this.assignedcontrolled.bboxdistanceto.{$bigtarget} lt $MaxGainDistance)']/set_value[@name='$time_gaindistance'][@min='[10s * this.assignedcontrolled.combinedskill / 100, 1s].max'][@max='[30s * this.assignedcontrolled.combinedskill / 100, 3s].max']/@min">10s</replace>
  <replace sel="/aiscript/attention[@min='visible']/actions/do_while[@value='$target.canbeattacked']/do_while[@value='$target.canbeattacked and ($gaindistancetimeout gt player.age) and (this.assignedcontrolled.bboxdistanceto.{$bigtarget} lt $MaxGainDistance)']/set_value[@name='$time_gaindistance'][@min='10s'][@max='[30s * this.assignedcontrolled.combinedskill / 100, 3s].max']/@max">30s</replace>
  <replace sel="/aiscript/attention[@min='unknown']/actions/set_value[@name='$MaxGainDistance'][@exact='this.ship.maxcombatrange.all']/@exact">[this.assignedcontrolled.maxcombatrange.all, this.assignedcontrolled.maxradarrange * 0.9].min</replace>
</diff>
